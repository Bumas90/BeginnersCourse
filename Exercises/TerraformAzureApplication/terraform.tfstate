{
  "version": 4,
  "terraform_version": "1.1.3",
  "serial": 65,
  "lineage": "5ea427e8-06ed-fbc5-09fb-788588bcc8ea",
  "outputs": {
    "azurerm_fqdn": {
      "value": "swit165az303.westeurope.cloudapp.azure.com",
      "type": "string"
    },
    "azurerm_public_ip": {
      "value": "137.117.165.42",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "template_file",
      "name": "nginx-vm-cloud-init",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "bc37faddce02f0c4cf9e1f909cfd41b156060a6671c8fd1c58a1957ec9f47d2d",
            "rendered": "#!/bin/bash\n# ********************************************************************************************************************************************\n# configure_myphpadmin\n# ********************************************************************************************************************************************\n\nexport NGINX_FQDN=\"swit165az303.westeurope.cloudapp.azure.com\"\nexport DB_FQDN=\"az304-mysql-srv.mysql.database.azure.com\"\nexport DB_USER=\"sqladmin\"\nexport DB_PWD=\"JubjubBird1806!\"\n\necho \"NGINX_FQDN='$NGINX_FQDN'\"\necho \"DB_FQDN='$DB_FQDN'\"\necho \"DB_USER='$DB_USER'\"\necho \"DB_PWD='$DB_PWD'\"\n\n# ************************************************************************\nconfigure_myphpadmin() {\n\nsudo tee /etc/dbconfig-common/phpmyadmin.conf \u003c\u003cEOT\n  # automatically generated by the maintainer scripts of phpmyadmin\n  # any changes you make will be preserved, though your comments\n  # will be lost!  to change your settings you should edit this\n  # file and then run \"dpkg-reconfigure phpmyadmin\"\n  \n  # dbc_install: configure database with dbconfig-common?\n  #              set to anything but \"false\" to opt out of assistance\n  dbc_install='false'\n  \n  # dbc_upgrade: upgrade database with dbconfig-common?\n  #              set to anything but \"false\" to opt out of assistance\n  dbc_upgrade='false'\n  \n  # dbc_remove: deconfigure database with dbconfig-common?\n  #             set to anything but \"false\" to opt out of assistance\n  dbc_remove='false'\nEOT\n  \nsudo tee /etc/phpmyadmin/config-db.php \u003c\u003cEOT\n\u003c?php\n  # !!! dbname is mandatory or login won't work!!!\n  #\n  \\$dbuser='$DB_USER';\n  \\$dbpass='$DB_PWD';\n  \\$basepath='';\n  \\$dbname='phpmyadmin';\n  \\$dbserver='$DB_FQDN';\n  \\$dbport='3306';\n  \\$dbtype='mysql';\n?\u003e\nEOT\n}\n\n# ********************************************************************************************************************************************\n# create_nginx_conf\n# ********************************************************************************************************************************************\n#\ncreate_nginx_conf () {\n# with php\nsudo tee -a /etc/nginx/fastcgi_params \u003c\u003cEOT\n  fastcgi_param  SCRIPT_FILENAME    \\$document_root\\$fastcgi_script_name; \nEOT\n\nsudo tee /etc/nginx/fastcgi.conf \u003c\u003cEOT \n  # 404\n  try_files \\$fastcgi_script_name =404;\n\n  # default fastcgi_params\n  include fastcgi_params;\n\n  # fastcgi settings\n# fastcgi_pass\t\t\tunix:/run/php/php7.2-fpm.sock;\n  fastcgi_index\t\t\tindex.php;\n  fastcgi_buffers\t\t\t8 16k;\n  fastcgi_buffer_size\t\t32k;\n  fastcgi_hide_header             X-Powered-By;\n  fastcgi_hide_header             X-CF-Powered-By;\nEOT\n\nsudo tee /etc/nginx/nginx.conf \u003c\u003cEOT \n  user www-data;\n  worker_processes auto;\n  pid /run/nginx.pid;\n  include /etc/nginx/modules-enabled/*.conf;\n\n  events  {\n    worker_connections 768;\n    # multi_accept on;\n  }\n  \n  http {\n    ##\n    # Basic Settings\n    ##\n  \n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout 65;\n    types_hash_max_size 2048;\n    # server_tokens off;\n    # server_names_hash_bucket_size 64;\n    # server_name_in_redirect off;\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n    ##\n    # SSL Settings\n    ##\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE\n    ssl_prefer_server_ciphers on;\n  \n    ##\n    # Logging Settings\n    ##\n    access_log /var/log/nginx/access.log;\n    error_log /var/log/nginx/error.log;\n    ##\n    # Gzip Settings\n    ##\n    gzip on;\n    # gzip_vary on;\n    # gzip_proxied any;\n    # gzip_comp_level 6;\n    # gzip_buffers 16 8k;\n    # gzip_http_version 1.1;\n    # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n    ##\n    # Virtual Host Configs\n    ##\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n  }\nEOT\n\nsudo rm -f /etc/nginx/sites-available/default /etc/nginx/sites-enabled/default /etc/nginx/sites-enabled/$NGINX_FQDN\nsudo mkdir /var/www/$NGINX_FQDN\nsudo tee /etc/nginx/sites-available/$NGINX_FQDN \u003c\u003cEOT \n  # Virtual Host configuration for \n  #\n  # You can move that to a different file under sites-available/ and symlink that\n  # to sites-enabled/ to enable it.\n  #\n  server {\n\n    server_name $NGINX_FQDN;\n\n    root /var/www/$NGINX_FQDN;\n    index index.php;\n\n    location / {\n#         try_files $uri $uri/ =404;\n    }\n  \n    location ~ \\.php$ {\n      try_files \\$uri =404;\n      fastcgi_pass unix:/run/php/php7.2-fpm.sock;\n      fastcgi_index index.php;\n      fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n      include fastcgi_params;\n      }   \n  }\nEOT\nsudo ln -s /etc/nginx/sites-available/$NGINX_FQDN /etc/nginx/sites-enabled/$NGINX_FQDN\n}\n\n# ********************************************************************************************************************************************\n# main\n# ********************************************************************************************************************************************\n#\n# ============ set local time  =============================\n# \nsudo rm -f /etc/localtime \nsudo ln -s /usr/share/zoneinfo/Europe/Berlin /etc/localtime\n#\n# ============ nginx =============================\n#\nsudo apt-get update\nsudo apt install nginx -y\n\n# ============ php w.o. apache =============================\n# the sequence of packets does the trick somehow\n#\nsudo apt install php7.2-fpm php-cgi -y\nsudo apt install php php-cli -y\nsudo apt install php-json php-mysql php-zip php-gd  php-mbstring php-curl php-xml php-pear php-bcmath -y\ncreate_nginx_conf\nsudo systemctl restart nginx\n#\n# ============ certbot =============================\n#\nsudo snap install core \u0026\u0026 sudo snap refresh core\nsudo snap install --classic certbot\nsudo ln -s /snap/bin/certbot /usr/bin/certbot\n# sudo /bin/sh -v -c \"/usr/bin/certbot --test-cert --agree-tos --email \u003cyour_email\u003e@somewhere -n --nginx --domains $NGINX_FQDN\"\nsudo /bin/sh -v -c \"/usr/bin/certbot --agree-tos --email nginx@stefanwittwer.de -n --nginx --domains $NGINX_FQDN\"\nsudo systemctl restart nginx\n#\n# ============ phpMyAdmin =============================\n#\nsudo sh -c \"DEBIAN_FRONTEND=noninteractive apt-get -y install phpmyadmin\"\nln -s /usr/share/phpmyadmin /var/www/$NGINX_FQDN/phpmyadmin\nconfigure_myphpadmin\n#\n# ugly patch to avoid error message for empty array with count()\n# echo sudo sed -i \\\"s/|\\s*\\((count(\\$analyzed_sql_results\\['select_expr'\\]\\)/| (\\1)/g\\\" /usr/share/phpmyadmin/libraries/sql.lib.php\nsudo sed -i \"s/|\\s*\\((count(\\$analyzed_sql_results\\['select_expr'\\]\\)/| (\\1)/g\" /usr/share/phpmyadmin/libraries/sql.lib.php\n#\nsudo mysql -h \"$DB_FQDN\" -u \"$DB_USER\" -p \"$DB_PWD\" \u003c /usr/share/phpmyadmin/sql/create_tables.sql \nsudo systemctl restart nginx\n",
            "template": "#!/bin/bash\n# ********************************************************************************************************************************************\n# configure_myphpadmin\n# ********************************************************************************************************************************************\n\nexport NGINX_FQDN=\"${nginx_fqdn}\"\nexport DB_FQDN=\"${db_fqdn}\"\nexport DB_USER=\"${db_user}\"\nexport DB_PWD=\"${db_pwd}\"\n\necho \"NGINX_FQDN='$NGINX_FQDN'\"\necho \"DB_FQDN='$DB_FQDN'\"\necho \"DB_USER='$DB_USER'\"\necho \"DB_PWD='$DB_PWD'\"\n\n# ************************************************************************\nconfigure_myphpadmin() {\n\nsudo tee /etc/dbconfig-common/phpmyadmin.conf \u003c\u003cEOT\n  # automatically generated by the maintainer scripts of phpmyadmin\n  # any changes you make will be preserved, though your comments\n  # will be lost!  to change your settings you should edit this\n  # file and then run \"dpkg-reconfigure phpmyadmin\"\n  \n  # dbc_install: configure database with dbconfig-common?\n  #              set to anything but \"false\" to opt out of assistance\n  dbc_install='false'\n  \n  # dbc_upgrade: upgrade database with dbconfig-common?\n  #              set to anything but \"false\" to opt out of assistance\n  dbc_upgrade='false'\n  \n  # dbc_remove: deconfigure database with dbconfig-common?\n  #             set to anything but \"false\" to opt out of assistance\n  dbc_remove='false'\nEOT\n  \nsudo tee /etc/phpmyadmin/config-db.php \u003c\u003cEOT\n\u003c?php\n  # !!! dbname is mandatory or login won't work!!!\n  #\n  \\$dbuser='$DB_USER';\n  \\$dbpass='$DB_PWD';\n  \\$basepath='';\n  \\$dbname='phpmyadmin';\n  \\$dbserver='$DB_FQDN';\n  \\$dbport='3306';\n  \\$dbtype='mysql';\n?\u003e\nEOT\n}\n\n# ********************************************************************************************************************************************\n# create_nginx_conf\n# ********************************************************************************************************************************************\n#\ncreate_nginx_conf () {\n# with php\nsudo tee -a /etc/nginx/fastcgi_params \u003c\u003cEOT\n  fastcgi_param  SCRIPT_FILENAME    \\$document_root\\$fastcgi_script_name; \nEOT\n\nsudo tee /etc/nginx/fastcgi.conf \u003c\u003cEOT \n  # 404\n  try_files \\$fastcgi_script_name =404;\n\n  # default fastcgi_params\n  include fastcgi_params;\n\n  # fastcgi settings\n# fastcgi_pass\t\t\tunix:/run/php/php7.2-fpm.sock;\n  fastcgi_index\t\t\tindex.php;\n  fastcgi_buffers\t\t\t8 16k;\n  fastcgi_buffer_size\t\t32k;\n  fastcgi_hide_header             X-Powered-By;\n  fastcgi_hide_header             X-CF-Powered-By;\nEOT\n\nsudo tee /etc/nginx/nginx.conf \u003c\u003cEOT \n  user www-data;\n  worker_processes auto;\n  pid /run/nginx.pid;\n  include /etc/nginx/modules-enabled/*.conf;\n\n  events  {\n    worker_connections 768;\n    # multi_accept on;\n  }\n  \n  http {\n    ##\n    # Basic Settings\n    ##\n  \n    sendfile on;\n    tcp_nopush on;\n    tcp_nodelay on;\n    keepalive_timeout 65;\n    types_hash_max_size 2048;\n    # server_tokens off;\n    # server_names_hash_bucket_size 64;\n    # server_name_in_redirect off;\n    include /etc/nginx/mime.types;\n    default_type application/octet-stream;\n    ##\n    # SSL Settings\n    ##\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE\n    ssl_prefer_server_ciphers on;\n  \n    ##\n    # Logging Settings\n    ##\n    access_log /var/log/nginx/access.log;\n    error_log /var/log/nginx/error.log;\n    ##\n    # Gzip Settings\n    ##\n    gzip on;\n    # gzip_vary on;\n    # gzip_proxied any;\n    # gzip_comp_level 6;\n    # gzip_buffers 16 8k;\n    # gzip_http_version 1.1;\n    # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n    ##\n    # Virtual Host Configs\n    ##\n    include /etc/nginx/conf.d/*.conf;\n    include /etc/nginx/sites-enabled/*;\n  }\nEOT\n\nsudo rm -f /etc/nginx/sites-available/default /etc/nginx/sites-enabled/default /etc/nginx/sites-enabled/$NGINX_FQDN\nsudo mkdir /var/www/$NGINX_FQDN\nsudo tee /etc/nginx/sites-available/$NGINX_FQDN \u003c\u003cEOT \n  # Virtual Host configuration for \n  #\n  # You can move that to a different file under sites-available/ and symlink that\n  # to sites-enabled/ to enable it.\n  #\n  server {\n\n    server_name $NGINX_FQDN;\n\n    root /var/www/$NGINX_FQDN;\n    index index.php;\n\n    location / {\n#         try_files $uri $uri/ =404;\n    }\n  \n    location ~ \\.php$ {\n      try_files \\$uri =404;\n      fastcgi_pass unix:/run/php/php7.2-fpm.sock;\n      fastcgi_index index.php;\n      fastcgi_param SCRIPT_FILENAME \\$document_root\\$fastcgi_script_name;\n      include fastcgi_params;\n      }   \n  }\nEOT\nsudo ln -s /etc/nginx/sites-available/$NGINX_FQDN /etc/nginx/sites-enabled/$NGINX_FQDN\n}\n\n# ********************************************************************************************************************************************\n# main\n# ********************************************************************************************************************************************\n#\n# ============ set local time  =============================\n# \nsudo rm -f /etc/localtime \nsudo ln -s /usr/share/zoneinfo/Europe/Berlin /etc/localtime\n#\n# ============ nginx =============================\n#\nsudo apt-get update\nsudo apt install nginx -y\n\n# ============ php w.o. apache =============================\n# the sequence of packets does the trick somehow\n#\nsudo apt install php7.2-fpm php-cgi -y\nsudo apt install php php-cli -y\nsudo apt install php-json php-mysql php-zip php-gd  php-mbstring php-curl php-xml php-pear php-bcmath -y\ncreate_nginx_conf\nsudo systemctl restart nginx\n#\n# ============ certbot =============================\n#\nsudo snap install core \u0026\u0026 sudo snap refresh core\nsudo snap install --classic certbot\nsudo ln -s /snap/bin/certbot /usr/bin/certbot\n# sudo /bin/sh -v -c \"/usr/bin/certbot --test-cert --agree-tos --email \u003cyour_email\u003e@somewhere -n --nginx --domains $NGINX_FQDN\"\nsudo /bin/sh -v -c \"/usr/bin/certbot --agree-tos --email nginx@stefanwittwer.de -n --nginx --domains $NGINX_FQDN\"\nsudo systemctl restart nginx\n#\n# ============ phpMyAdmin =============================\n#\nsudo sh -c \"DEBIAN_FRONTEND=noninteractive apt-get -y install phpmyadmin\"\nln -s /usr/share/phpmyadmin /var/www/$NGINX_FQDN/phpmyadmin\nconfigure_myphpadmin\n#\n# ugly patch to avoid error message for empty array with count()\n# echo sudo sed -i \\\"s/|\\s*\\((count(\\$analyzed_sql_results\\['select_expr'\\]\\)/| (\\1)/g\\\" /usr/share/phpmyadmin/libraries/sql.lib.php\nsudo sed -i \"s/|\\s*\\((count(\\$analyzed_sql_results\\['select_expr'\\]\\)/| (\\1)/g\" /usr/share/phpmyadmin/libraries/sql.lib.php\n#\nsudo mysql -h \"$DB_FQDN\" -u \"$DB_USER\" -p \"$DB_PWD\" \u003c /usr/share/phpmyadmin/sql/create_tables.sql \nsudo systemctl restart nginx\n",
            "vars": {
              "db_fqdn": "az304-mysql-srv.mysql.database.azure.com",
              "db_pwd": "JubjubBird1806!",
              "db_user": "sqladmin",
              "nginx_fqdn": "swit165az303.westeurope.cloudapp.azure.com"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_linux_virtual_machine",
      "name": "nginx",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "additional_capabilities": [],
            "admin_password": null,
            "admin_ssh_key": [
              {
                "public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQC/r/LDqsiyw3tv/mflZckY/ObmnrQShQdwhECGQZH7YdfwRc4Jbr2m7PQfBizePZ08JFJwY6BNlqYUpy2ZBCfM8yStIkSxpPpOiP7iGqDUjX5UMSj/0fkjJqKjnk9yn7998ZoSKnuyEqYQfS9Ffgu4UDtfp/KbWDph8lRapXYsi1Th9gFy3ZCWrKlA5DEOshbQUWGEmX0wtD+JcB49/1wtHiwF+E4AoYtn9VYl/jskqFJJO4sKEHC3zeE+tMt6r7vLe4ollKK6ID0g7d7yh8ZnX15/V4QZEuuQ88Jg5UIPxeJcYjZz+LNmsiU2ueqIurppx5imnUF/1aKjEWmwPnkqmfPpuq1y+HYk5QaEZRiRrCCEfUCw2N2Nkq6XPBmCzxv1E3cN6i4b6GoSQmBZHTXeipp3JCFTWjHpZeG+kDO2l3Ogd6FT5P5GxQ/uymPOh6YhfykFWv0MHMI3gTsxyokzHsz4aYub5sYmN4ug1WC5dUDntkrZO4wNuwy1/XOxJ3s= Stefan@Stefan\n",
                "username": "adminuser"
              }
            ],
            "admin_username": "adminuser",
            "allow_extension_operations": true,
            "availability_set_id": "",
            "boot_diagnostics": [],
            "computer_name": "nginx-machine",
            "custom_data": "IyEvYmluL2Jhc2gKIyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgojIGNvbmZpZ3VyZV9teXBocGFkbWluCiMgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKCmV4cG9ydCBOR0lOWF9GUUROPSJzd2l0MTY1YXozMDMud2VzdGV1cm9wZS5jbG91ZGFwcC5henVyZS5jb20iCmV4cG9ydCBEQl9GUUROPSJhejMwNC1teXNxbC1zcnYubXlzcWwuZGF0YWJhc2UuYXp1cmUuY29tIgpleHBvcnQgREJfVVNFUj0ic3FsYWRtaW4iCmV4cG9ydCBEQl9QV0Q9Ikp1Ymp1YkJpcmQxODA2ISIKCmVjaG8gIk5HSU5YX0ZRRE49JyROR0lOWF9GUUROJyIKZWNobyAiREJfRlFETj0nJERCX0ZRRE4nIgplY2hvICJEQl9VU0VSPSckREJfVVNFUiciCmVjaG8gIkRCX1BXRD0nJERCX1BXRCciCgojICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgpjb25maWd1cmVfbXlwaHBhZG1pbigpIHsKCnN1ZG8gdGVlIC9ldGMvZGJjb25maWctY29tbW9uL3BocG15YWRtaW4uY29uZiA8PEVPVAogICMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYnkgdGhlIG1haW50YWluZXIgc2NyaXB0cyBvZiBwaHBteWFkbWluCiAgIyBhbnkgY2hhbmdlcyB5b3UgbWFrZSB3aWxsIGJlIHByZXNlcnZlZCwgdGhvdWdoIHlvdXIgY29tbWVudHMKICAjIHdpbGwgYmUgbG9zdCEgIHRvIGNoYW5nZSB5b3VyIHNldHRpbmdzIHlvdSBzaG91bGQgZWRpdCB0aGlzCiAgIyBmaWxlIGFuZCB0aGVuIHJ1biAiZHBrZy1yZWNvbmZpZ3VyZSBwaHBteWFkbWluIgogIAogICMgZGJjX2luc3RhbGw6IGNvbmZpZ3VyZSBkYXRhYmFzZSB3aXRoIGRiY29uZmlnLWNvbW1vbj8KICAjICAgICAgICAgICAgICBzZXQgdG8gYW55dGhpbmcgYnV0ICJmYWxzZSIgdG8gb3B0IG91dCBvZiBhc3Npc3RhbmNlCiAgZGJjX2luc3RhbGw9J2ZhbHNlJwogIAogICMgZGJjX3VwZ3JhZGU6IHVwZ3JhZGUgZGF0YWJhc2Ugd2l0aCBkYmNvbmZpZy1jb21tb24/CiAgIyAgICAgICAgICAgICAgc2V0IHRvIGFueXRoaW5nIGJ1dCAiZmFsc2UiIHRvIG9wdCBvdXQgb2YgYXNzaXN0YW5jZQogIGRiY191cGdyYWRlPSdmYWxzZScKICAKICAjIGRiY19yZW1vdmU6IGRlY29uZmlndXJlIGRhdGFiYXNlIHdpdGggZGJjb25maWctY29tbW9uPwogICMgICAgICAgICAgICAgc2V0IHRvIGFueXRoaW5nIGJ1dCAiZmFsc2UiIHRvIG9wdCBvdXQgb2YgYXNzaXN0YW5jZQogIGRiY19yZW1vdmU9J2ZhbHNlJwpFT1QKICAKc3VkbyB0ZWUgL2V0Yy9waHBteWFkbWluL2NvbmZpZy1kYi5waHAgPDxFT1QKPD9waHAKICAjICEhISBkYm5hbWUgaXMgbWFuZGF0b3J5IG9yIGxvZ2luIHdvbid0IHdvcmshISEKICAjCiAgXCRkYnVzZXI9JyREQl9VU0VSJzsKICBcJGRicGFzcz0nJERCX1BXRCc7CiAgXCRiYXNlcGF0aD0nJzsKICBcJGRibmFtZT0ncGhwbXlhZG1pbic7CiAgXCRkYnNlcnZlcj0nJERCX0ZRRE4nOwogIFwkZGJwb3J0PSczMzA2JzsKICBcJGRidHlwZT0nbXlzcWwnOwo/PgpFT1QKfQoKIyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgojIGNyZWF0ZV9uZ2lueF9jb25mCiMgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKIwpjcmVhdGVfbmdpbnhfY29uZiAoKSB7CiMgd2l0aCBwaHAKc3VkbyB0ZWUgLWEgL2V0Yy9uZ2lueC9mYXN0Y2dpX3BhcmFtcyA8PEVPVAogIGZhc3RjZ2lfcGFyYW0gIFNDUklQVF9GSUxFTkFNRSAgICBcJGRvY3VtZW50X3Jvb3RcJGZhc3RjZ2lfc2NyaXB0X25hbWU7IApFT1QKCnN1ZG8gdGVlIC9ldGMvbmdpbngvZmFzdGNnaS5jb25mIDw8RU9UIAogICMgNDA0CiAgdHJ5X2ZpbGVzIFwkZmFzdGNnaV9zY3JpcHRfbmFtZSA9NDA0OwoKICAjIGRlZmF1bHQgZmFzdGNnaV9wYXJhbXMKICBpbmNsdWRlIGZhc3RjZ2lfcGFyYW1zOwoKICAjIGZhc3RjZ2kgc2V0dGluZ3MKIyBmYXN0Y2dpX3Bhc3MJCQl1bml4Oi9ydW4vcGhwL3BocDcuMi1mcG0uc29jazsKICBmYXN0Y2dpX2luZGV4CQkJaW5kZXgucGhwOwogIGZhc3RjZ2lfYnVmZmVycwkJCTggMTZrOwogIGZhc3RjZ2lfYnVmZmVyX3NpemUJCTMyazsKICBmYXN0Y2dpX2hpZGVfaGVhZGVyICAgICAgICAgICAgIFgtUG93ZXJlZC1CeTsKICBmYXN0Y2dpX2hpZGVfaGVhZGVyICAgICAgICAgICAgIFgtQ0YtUG93ZXJlZC1CeTsKRU9UCgpzdWRvIHRlZSAvZXRjL25naW54L25naW54LmNvbmYgPDxFT1QgCiAgdXNlciB3d3ctZGF0YTsKICB3b3JrZXJfcHJvY2Vzc2VzIGF1dG87CiAgcGlkIC9ydW4vbmdpbngucGlkOwogIGluY2x1ZGUgL2V0Yy9uZ2lueC9tb2R1bGVzLWVuYWJsZWQvKi5jb25mOwoKICBldmVudHMgIHsKICAgIHdvcmtlcl9jb25uZWN0aW9ucyA3Njg7CiAgICAjIG11bHRpX2FjY2VwdCBvbjsKICB9CiAgCiAgaHR0cCB7CiAgICAjIwogICAgIyBCYXNpYyBTZXR0aW5ncwogICAgIyMKICAKICAgIHNlbmRmaWxlIG9uOwogICAgdGNwX25vcHVzaCBvbjsKICAgIHRjcF9ub2RlbGF5IG9uOwogICAga2VlcGFsaXZlX3RpbWVvdXQgNjU7CiAgICB0eXBlc19oYXNoX21heF9zaXplIDIwNDg7CiAgICAjIHNlcnZlcl90b2tlbnMgb2ZmOwogICAgIyBzZXJ2ZXJfbmFtZXNfaGFzaF9idWNrZXRfc2l6ZSA2NDsKICAgICMgc2VydmVyX25hbWVfaW5fcmVkaXJlY3Qgb2ZmOwogICAgaW5jbHVkZSAvZXRjL25naW54L21pbWUudHlwZXM7CiAgICBkZWZhdWx0X3R5cGUgYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtOwogICAgIyMKICAgICMgU1NMIFNldHRpbmdzCiAgICAjIwogICAgc3NsX3Byb3RvY29scyBUTFN2MSBUTFN2MS4xIFRMU3YxLjI7ICMgRHJvcHBpbmcgU1NMdjMsIHJlZjogUE9PRExFCiAgICBzc2xfcHJlZmVyX3NlcnZlcl9jaXBoZXJzIG9uOwogIAogICAgIyMKICAgICMgTG9nZ2luZyBTZXR0aW5ncwogICAgIyMKICAgIGFjY2Vzc19sb2cgL3Zhci9sb2cvbmdpbngvYWNjZXNzLmxvZzsKICAgIGVycm9yX2xvZyAvdmFyL2xvZy9uZ2lueC9lcnJvci5sb2c7CiAgICAjIwogICAgIyBHemlwIFNldHRpbmdzCiAgICAjIwogICAgZ3ppcCBvbjsKICAgICMgZ3ppcF92YXJ5IG9uOwogICAgIyBnemlwX3Byb3hpZWQgYW55OwogICAgIyBnemlwX2NvbXBfbGV2ZWwgNjsKICAgICMgZ3ppcF9idWZmZXJzIDE2IDhrOwogICAgIyBnemlwX2h0dHBfdmVyc2lvbiAxLjE7CiAgICAjIGd6aXBfdHlwZXMgdGV4dC9wbGFpbiB0ZXh0L2NzcyBhcHBsaWNhdGlvbi9qc29uIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQgdGV4dC94bWwgYXBwbGljYXRpb24veG1sIGFwcGxpY2F0aW9uL3htbCtyc3MgdGV4dC9qYXZhc2NyaXB0OwogICAgIyMKICAgICMgVmlydHVhbCBIb3N0IENvbmZpZ3MKICAgICMjCiAgICBpbmNsdWRlIC9ldGMvbmdpbngvY29uZi5kLyouY29uZjsKICAgIGluY2x1ZGUgL2V0Yy9uZ2lueC9zaXRlcy1lbmFibGVkLyo7CiAgfQpFT1QKCnN1ZG8gcm0gLWYgL2V0Yy9uZ2lueC9zaXRlcy1hdmFpbGFibGUvZGVmYXVsdCAvZXRjL25naW54L3NpdGVzLWVuYWJsZWQvZGVmYXVsdCAvZXRjL25naW54L3NpdGVzLWVuYWJsZWQvJE5HSU5YX0ZRRE4Kc3VkbyBta2RpciAvdmFyL3d3dy8kTkdJTlhfRlFETgpzdWRvIHRlZSAvZXRjL25naW54L3NpdGVzLWF2YWlsYWJsZS8kTkdJTlhfRlFETiA8PEVPVCAKICAjIFZpcnR1YWwgSG9zdCBjb25maWd1cmF0aW9uIGZvciAKICAjCiAgIyBZb3UgY2FuIG1vdmUgdGhhdCB0byBhIGRpZmZlcmVudCBmaWxlIHVuZGVyIHNpdGVzLWF2YWlsYWJsZS8gYW5kIHN5bWxpbmsgdGhhdAogICMgdG8gc2l0ZXMtZW5hYmxlZC8gdG8gZW5hYmxlIGl0LgogICMKICBzZXJ2ZXIgewoKICAgIHNlcnZlcl9uYW1lICROR0lOWF9GUUROOwoKICAgIHJvb3QgL3Zhci93d3cvJE5HSU5YX0ZRRE47CiAgICBpbmRleCBpbmRleC5waHA7CgogICAgbG9jYXRpb24gLyB7CiMgICAgICAgICB0cnlfZmlsZXMgJHVyaSAkdXJpLyA9NDA0OwogICAgfQogIAogICAgbG9jYXRpb24gfiBcLnBocCQgewogICAgICB0cnlfZmlsZXMgXCR1cmkgPTQwNDsKICAgICAgZmFzdGNnaV9wYXNzIHVuaXg6L3J1bi9waHAvcGhwNy4yLWZwbS5zb2NrOwogICAgICBmYXN0Y2dpX2luZGV4IGluZGV4LnBocDsKICAgICAgZmFzdGNnaV9wYXJhbSBTQ1JJUFRfRklMRU5BTUUgXCRkb2N1bWVudF9yb290XCRmYXN0Y2dpX3NjcmlwdF9uYW1lOwogICAgICBpbmNsdWRlIGZhc3RjZ2lfcGFyYW1zOwogICAgICB9ICAgCiAgfQpFT1QKc3VkbyBsbiAtcyAvZXRjL25naW54L3NpdGVzLWF2YWlsYWJsZS8kTkdJTlhfRlFETiAvZXRjL25naW54L3NpdGVzLWVuYWJsZWQvJE5HSU5YX0ZRRE4KfQoKIyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgojIG1haW4KIyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgojCiMgPT09PT09PT09PT09IHNldCBsb2NhbCB0aW1lICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojIApzdWRvIHJtIC1mIC9ldGMvbG9jYWx0aW1lIApzdWRvIGxuIC1zIC91c3Ivc2hhcmUvem9uZWluZm8vRXVyb3BlL0JlcmxpbiAvZXRjL2xvY2FsdGltZQojCiMgPT09PT09PT09PT09IG5naW54ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMKc3VkbyBhcHQtZ2V0IHVwZGF0ZQpzdWRvIGFwdCBpbnN0YWxsIG5naW54IC15CgojID09PT09PT09PT09PSBwaHAgdy5vLiBhcGFjaGUgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KIyB0aGUgc2VxdWVuY2Ugb2YgcGFja2V0cyBkb2VzIHRoZSB0cmljayBzb21laG93CiMKc3VkbyBhcHQgaW5zdGFsbCBwaHA3LjItZnBtIHBocC1jZ2kgLXkKc3VkbyBhcHQgaW5zdGFsbCBwaHAgcGhwLWNsaSAteQpzdWRvIGFwdCBpbnN0YWxsIHBocC1qc29uIHBocC1teXNxbCBwaHAtemlwIHBocC1nZCAgcGhwLW1ic3RyaW5nIHBocC1jdXJsIHBocC14bWwgcGhwLXBlYXIgcGhwLWJjbWF0aCAteQpjcmVhdGVfbmdpbnhfY29uZgpzdWRvIHN5c3RlbWN0bCByZXN0YXJ0IG5naW54CiMKIyA9PT09PT09PT09PT0gY2VydGJvdCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojCnN1ZG8gc25hcCBpbnN0YWxsIGNvcmUgJiYgc3VkbyBzbmFwIHJlZnJlc2ggY29yZQpzdWRvIHNuYXAgaW5zdGFsbCAtLWNsYXNzaWMgY2VydGJvdApzdWRvIGxuIC1zIC9zbmFwL2Jpbi9jZXJ0Ym90IC91c3IvYmluL2NlcnRib3QKIyBzdWRvIC9iaW4vc2ggLXYgLWMgIi91c3IvYmluL2NlcnRib3QgLS10ZXN0LWNlcnQgLS1hZ3JlZS10b3MgLS1lbWFpbCA8eW91cl9lbWFpbD5Ac29tZXdoZXJlIC1uIC0tbmdpbnggLS1kb21haW5zICROR0lOWF9GUUROIgpzdWRvIC9iaW4vc2ggLXYgLWMgIi91c3IvYmluL2NlcnRib3QgLS1hZ3JlZS10b3MgLS1lbWFpbCBuZ2lueEBzdGVmYW53aXR0d2VyLmRlIC1uIC0tbmdpbnggLS1kb21haW5zICROR0lOWF9GUUROIgpzdWRvIHN5c3RlbWN0bCByZXN0YXJ0IG5naW54CiMKIyA9PT09PT09PT09PT0gcGhwTXlBZG1pbiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PQojCnN1ZG8gc2ggLWMgIkRFQklBTl9GUk9OVEVORD1ub25pbnRlcmFjdGl2ZSBhcHQtZ2V0IC15IGluc3RhbGwgcGhwbXlhZG1pbiIKbG4gLXMgL3Vzci9zaGFyZS9waHBteWFkbWluIC92YXIvd3d3LyROR0lOWF9GUUROL3BocG15YWRtaW4KY29uZmlndXJlX215cGhwYWRtaW4KIwojIHVnbHkgcGF0Y2ggdG8gYXZvaWQgZXJyb3IgbWVzc2FnZSBmb3IgZW1wdHkgYXJyYXkgd2l0aCBjb3VudCgpCiMgZWNobyBzdWRvIHNlZCAtaSBcInMvfFxzKlwoKGNvdW50KFwkYW5hbHl6ZWRfc3FsX3Jlc3VsdHNcWydzZWxlY3RfZXhwcidcXVwpL3wgKFwxKS9nXCIgL3Vzci9zaGFyZS9waHBteWFkbWluL2xpYnJhcmllcy9zcWwubGliLnBocApzdWRvIHNlZCAtaSAicy98XHMqXCgoY291bnQoXCRhbmFseXplZF9zcWxfcmVzdWx0c1xbJ3NlbGVjdF9leHByJ1xdXCkvfCAoXDEpL2ciIC91c3Ivc2hhcmUvcGhwbXlhZG1pbi9saWJyYXJpZXMvc3FsLmxpYi5waHAKIwpzdWRvIG15c3FsIC1oICIkREJfRlFETiIgLXUgIiREQl9VU0VSIiAtcCAiJERCX1BXRCIgPCAvdXNyL3NoYXJlL3BocG15YWRtaW4vc3FsL2NyZWF0ZV90YWJsZXMuc3FsIApzdWRvIHN5c3RlbWN0bCByZXN0YXJ0IG5naW54Cg==",
            "dedicated_host_id": "",
            "disable_password_authentication": true,
            "encryption_at_host_enabled": false,
            "eviction_policy": "",
            "extensions_time_budget": "PT1H30M",
            "id": "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Compute/virtualMachines/nginx-machine",
            "identity": [],
            "license_type": "",
            "location": "westeurope",
            "max_bid_price": -1,
            "name": "nginx-machine",
            "network_interface_ids": [
              "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Network/networkInterfaces/nginx-nic"
            ],
            "os_disk": [
              {
                "caching": "ReadWrite",
                "diff_disk_settings": [],
                "disk_encryption_set_id": "",
                "disk_size_gb": 30,
                "name": "nginx-machine_disk1_a6077898052541bd8101788323171d43",
                "storage_account_type": "Standard_LRS",
                "write_accelerator_enabled": false
              }
            ],
            "patch_mode": "ImageDefault",
            "plan": [],
            "platform_fault_domain": -1,
            "priority": "Regular",
            "private_ip_address": "10.0.2.4",
            "private_ip_addresses": [
              "10.0.2.4"
            ],
            "provision_vm_agent": true,
            "proximity_placement_group_id": "",
            "public_ip_address": "137.117.165.42",
            "public_ip_addresses": [
              "137.117.165.42"
            ],
            "resource_group_name": "nginx-resources",
            "secret": [],
            "secure_boot_enabled": false,
            "size": "Standard_B1ls",
            "source_image_id": "",
            "source_image_reference": [
              {
                "offer": "UbuntuServer",
                "publisher": "Canonical",
                "sku": "18.04-LTS",
                "version": "latest"
              }
            ],
            "tags": null,
            "timeouts": null,
            "virtual_machine_id": "28cf048e-3ffc-4b5e-847b-60cbfb2289cc",
            "virtual_machine_scale_set_id": "",
            "vtpm_enabled": false,
            "zone": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoyNzAwMDAwMDAwMDAwLCJkZWxldGUiOjI3MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoyNzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_network_interface.nginx",
            "azurerm_resource_group.nginx",
            "data.template_file.nginx-vm-cloud-init"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_network_interface",
      "name": "nginx",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "applied_dns_servers": [],
            "dns_servers": [],
            "enable_accelerated_networking": false,
            "enable_ip_forwarding": false,
            "id": "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Network/networkInterfaces/nginx-nic",
            "internal_dns_name_label": "",
            "internal_domain_name_suffix": "hqnbril0tuneha2ipbpuct15jg.ax.internal.cloudapp.net",
            "ip_configuration": [
              {
                "gateway_load_balancer_frontend_ip_configuration_id": "",
                "name": "internal",
                "primary": true,
                "private_ip_address": "10.0.2.4",
                "private_ip_address_allocation": "Dynamic",
                "private_ip_address_version": "IPv4",
                "public_ip_address_id": "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Network/publicIPAddresses/nginx-pubIP",
                "subnet_id": "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Network/virtualNetworks/nginx-network/subnets/internal"
              }
            ],
            "location": "westeurope",
            "mac_address": "",
            "name": "nginx-nic",
            "private_ip_address": "10.0.2.4",
            "private_ip_addresses": [
              "10.0.2.4"
            ],
            "resource_group_name": "nginx-resources",
            "tags": {},
            "timeouts": null,
            "virtual_machine_id": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.nginx",
            "azurerm_subnet.nginx",
            "azurerm_virtual_network.nginx",
            "azurerm_public_ip.nginxpublicip"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_network_interface_security_group_association",
      "name": "nginx",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Network/networkInterfaces/nginx-nic|/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Network/networkSecurityGroups/nginxNSG",
            "network_interface_id": "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Network/networkInterfaces/nginx-nic",
            "network_security_group_id": "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Network/networkSecurityGroups/nginxNSG",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_network_interface.nginx",
            "azurerm_network_security_group.nginx-nsg",
            "azurerm_public_ip.nginxpublicip",
            "azurerm_resource_group.nginx",
            "azurerm_subnet.nginx",
            "azurerm_virtual_network.nginx"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_network_security_group",
      "name": "nginx-nsg",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Network/networkSecurityGroups/nginxNSG",
            "location": "westeurope",
            "name": "nginxNSG",
            "resource_group_name": "nginx-resources",
            "security_rule": [
              {
                "access": "Allow",
                "description": "",
                "destination_address_prefix": "*",
                "destination_address_prefixes": [],
                "destination_application_security_group_ids": [],
                "destination_port_range": "22",
                "destination_port_ranges": [],
                "direction": "Inbound",
                "name": "SSH",
                "priority": 1001,
                "protocol": "Tcp",
                "source_address_prefix": "*",
                "source_address_prefixes": [],
                "source_application_security_group_ids": [],
                "source_port_range": "*",
                "source_port_ranges": []
              },
              {
                "access": "Allow",
                "description": "",
                "destination_address_prefix": "*",
                "destination_address_prefixes": [],
                "destination_application_security_group_ids": [],
                "destination_port_range": "3306",
                "destination_port_ranges": [],
                "direction": "Outbound",
                "name": "mysql-client",
                "priority": 1005,
                "protocol": "Tcp",
                "source_address_prefix": "*",
                "source_address_prefixes": [],
                "source_application_security_group_ids": [],
                "source_port_range": "*",
                "source_port_ranges": []
              },
              {
                "access": "Allow",
                "description": "",
                "destination_address_prefix": "*",
                "destination_address_prefixes": [],
                "destination_application_security_group_ids": [],
                "destination_port_range": "443",
                "destination_port_ranges": [],
                "direction": "Inbound",
                "name": "HTTPS",
                "priority": 1021,
                "protocol": "Tcp",
                "source_address_prefix": "*",
                "source_address_prefixes": [],
                "source_application_security_group_ids": [],
                "source_port_range": "*",
                "source_port_ranges": []
              },
              {
                "access": "Allow",
                "description": "",
                "destination_address_prefix": "*",
                "destination_address_prefixes": [],
                "destination_application_security_group_ids": [],
                "destination_port_range": "80",
                "destination_port_ranges": [],
                "direction": "Inbound",
                "name": "HTTP",
                "priority": 1011,
                "protocol": "Tcp",
                "source_address_prefix": "*",
                "source_address_prefixes": [],
                "source_application_security_group_ids": [],
                "source_port_range": "*",
                "source_port_ranges": []
              }
            ],
            "tags": {
              "environment": "nginx"
            },
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.nginx"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_public_ip",
      "name": "nginxpublicip",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_method": "Static",
            "availability_zone": "No-Zone",
            "domain_name_label": "swit165az303",
            "fqdn": "swit165az303.westeurope.cloudapp.azure.com",
            "id": "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Network/publicIPAddresses/nginx-pubIP",
            "idle_timeout_in_minutes": 4,
            "ip_address": "137.117.165.42",
            "ip_tags": {},
            "ip_version": "IPv4",
            "location": "westeurope",
            "name": "nginx-pubIP",
            "public_ip_prefix_id": null,
            "resource_group_name": "nginx-resources",
            "reverse_fqdn": "",
            "sku": "Basic",
            "sku_tier": "Regional",
            "tags": {},
            "timeouts": null,
            "zones": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.nginx"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_resource_group",
      "name": "nginx",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources",
            "location": "westeurope",
            "name": "nginx-resources",
            "tags": {},
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo1NDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjo1NDAwMDAwMDAwMDAwfX0="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_subnet",
      "name": "nginx",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address_prefix": "10.0.2.0/24",
            "address_prefixes": [
              "10.0.2.0/24"
            ],
            "delegation": [],
            "enforce_private_link_endpoint_network_policies": false,
            "enforce_private_link_service_network_policies": false,
            "id": "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Network/virtualNetworks/nginx-network/subnets/internal",
            "name": "internal",
            "resource_group_name": "nginx-resources",
            "service_endpoint_policy_ids": [],
            "service_endpoints": [],
            "timeouts": null,
            "virtual_network_name": "nginx-network"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.nginx",
            "azurerm_virtual_network.nginx"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "azurerm_virtual_network",
      "name": "nginx",
      "provider": "provider[\"registry.terraform.io/hashicorp/azurerm\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "address_space": [
              "10.0.0.0/16"
            ],
            "bgp_community": "",
            "ddos_protection_plan": [],
            "dns_servers": [],
            "flow_timeout_in_minutes": 0,
            "guid": "a1181a3c-9d7a-431a-8388-785f414f7f4e",
            "id": "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Network/virtualNetworks/nginx-network",
            "location": "westeurope",
            "name": "nginx-network",
            "resource_group_name": "nginx-resources",
            "subnet": [
              {
                "address_prefix": "10.0.2.0/24",
                "id": "/subscriptions/f3aedf34-04a2-4e37-9b22-0a0b6dce14d6/resourceGroups/nginx-resources/providers/Microsoft.Network/virtualNetworks/nginx-network/subnets/internal",
                "name": "internal",
                "security_group": ""
              }
            ],
            "tags": {},
            "timeouts": null,
            "vm_protection_enabled": false
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInJlYWQiOjMwMDAwMDAwMDAwMCwidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "azurerm_resource_group.nginx"
          ]
        }
      ]
    }
  ]
}
